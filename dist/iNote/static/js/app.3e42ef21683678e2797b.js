webpackJsonp([1],{"+BTi":function(t,e){},"+Rdb":function(t,e){},"/bpg":function(t,e){},"/i/W":function(t,e){},"2BWB":function(t,e){},"2rGO":function(t,e){},"5M0c":function(t,e){},"5ObC":function(t,e){},"8jhb":function(t,e){},"8mNY":function(t,e){},"8z31":function(t,e){},"9g35":function(t,e){},BNJR:function(t,e){},BWar:function(t,e){},BxWU:function(t,e){},DSCY:function(t,e){},Df1Z:function(t,e){},Dte2:function(t,e){},Dzb6:function(t,e){},EYpU:function(t,e){},GXEp:function(t,e){},H3rH:function(t,e){},I4nB:function(t,e){},Iun5:function(t,e){},IxJZ:function(t,e){},K1Rs:function(t,e){},LL4n:function(t,e){},M9yL:function(t,e){},Mf0D:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("2rGO"),a("+BTi");var o=a("nu7/"),n=a.n(o),l=(a("ukeg"),a("f65a")),i=a.n(l),s=(a("NOFV"),a("mWcH")),c=a.n(s),u=(a("w2s5"),a("oTyR")),r=a.n(u),d=(a("ZzA9"),a("cgIP")),g=a.n(d),f=(a("H3rH"),a("6mNG")),h=a.n(f),v=(a("9g35"),a("eDZK")),p=a.n(v),m=(a("wlbC"),a("1ZIF")),C=a.n(m),w=(a("Rh7U"),a("pkKZ")),N=a.n(w),b=(a("XPMo"),a("uEG6")),D=a.n(b),y=(a("8mNY"),a("YnkO")),_=a.n(y),k=(a("hXTu"),a("y7os")),M=a.n(k),$=(a("vBcO"),a("ARSI")),x=a.n($),R=(a("EYpU"),a("9Y4M")),E=a.n(R),B=(a("Z1wW"),a("raHz")),K=a.n(B),A=(a("BWar"),a("IMy7")),S=a.n(A),T=(a("Q6SQ"),a("LQMI")),J=a.n(T),O=(a("akml"),a("wZaX")),W=a.n(O),F=(a("uKbn"),a("GegP")),Y=a.n(F),Z=(a("jAzQ"),a("wOhx")),V=a.n(Z),U=(a("jZDA"),a("91Nw")),I=a.n(U),L=(a("d7TW"),a("ajQY")),X=a.n(L),j=(a("Iun5"),a("ttjG")),z=a.n(j),G=(a("BxWU"),a("g2bL")),P=a.n(G),H=(a("Df1Z"),a("D3wm")),Q=a.n(H),q=(a("s967"),a("855/")),tt=a.n(q),et=(a("wJKS"),a("orbS")),at=a.n(et),ot=(a("DSCY"),a("LaeV")),nt=a.n(ot),lt=(a("IxJZ"),a("NoPp")),it=a.n(lt),st=(a("+Rdb"),a("Mezo")),ct=a.n(st),ut=(a("qunJ"),a("vqwl")),rt=a.n(ut),dt=(a("M9yL"),a("OSLW")),gt=a.n(dt),ft=(a("/i/W"),a("V1RD")),ht=a.n(ft),vt=(a("RWjY"),a("aMwW")),pt=a.n(vt),mt=(a("8z31"),a("SXzR")),Ct=a.n(mt),wt=(a("5ObC"),a("4ZDJ")),Nt=a.n(wt),bt=(a("2BWB"),a("bFD8")),Dt=a.n(bt),yt=(a("isgN"),a("tLa+")),_t=a.n(yt),kt=(a("Dte2"),a("q4le")),Mt=a.n(kt),$t=(a("isE6"),a("LR6y")),xt=a.n($t),Rt=(a("vonM"),a("zAL+")),Et=a.n(Rt),Bt=(a("GXEp"),a("mtrD")),Kt=a.n(Bt),At=(a("5M0c"),a("YJmC")),St=a.n(At),Tt=(a("I4nB"),a("STLj")),Jt=a.n(Tt),Ot=(a("cDSy"),a("e0Bm")),Wt=a.n(Ot),Ft=(a("WzZF"),a("wxbk")),Yt=a.n(Ft),Zt=(a("TFIm"),a("s3ue")),Vt=a.n(Zt),Ut=(a("Xd7X"),a("L6k1")),It=a.n(Ut),Lt=(a("dmRH"),a("EKTV")),Xt=a.n(Lt),jt=(a("bRYy"),a("eBGF")),zt=a.n(jt),Gt=(a("BNJR"),a("fDPO")),Pt=a.n(Gt),Ht=(a("8jhb"),a("RDoK")),Qt=a.n(Ht),qt=(a("Zki6"),a("0kY3")),te=a.n(qt),ee=(a("X+ky"),a("HJMx")),ae=a.n(ee),oe=(a("V5v9"),a("D8db")),ne=a.n(oe),le=(a("/bpg"),a("ACGT")),ie=a.n(le),se=(a("Mf0D"),a("exT9")),ce=a.n(se),ue=(a("bwiK"),a("SExR")),re=a.n(ue),de=(a("LL4n"),a("BrEC")),ge=a.n(de),fe=(a("U/ZW"),a("+nRk")),he=a.n(fe),ve=(a("Dzb6"),a("o6kb")),pe=a.n(ve),me=(a("tJtB"),a("+vil")),Ce=a.n(me),we=(a("Yq4J"),a("qubY")),Ne=a.n(we),be=(a("ylrw"),a("6oiW")),De=a.n(be),ye=a("7+uW"),_e=a("mvHQ"),ke=a.n(_e);var Me={name:"Catalog",props:{catalog:Array,registedEvents:Array},data:function(){return{defaultProps:{children:"children",label:"label"},emptyText:"",highlightCurrent:!0}},methods:{showCatalogMenu:function(t,e,a,o){void 0!==this.registedEvents&&this.registedEvents.includes("showCatalogMenu")&&function(t,e,a,o){this.$store.dispatch("selectNode",{node:e});var n=document.getElementById("catalog-menu");n.style.left=t.clientX+"px",n.style.top=t.clientY+"px",this.$store.dispatch("show",{key:"showCatalogMenu",value:!0}),n.focus()}.call(this,t,e,a,o)},handleNodeClick:function(t){void 0!==this.registedEvents&&(this.registedEvents.includes("handleNodeClick")&&function(t){try{if(console.log("handelNodeClick: "+ke()(t)),this.$store.dispatch("show",{key:"showCatalogMenu",value:!1}),t.isNote)this.$store.dispatch("activeNote",{note:t});else{document.getElementsByClassName("search_box")[0].getElementsByTagName("input")[0].value="",this.$store.dispatch("deactivateNote");var e={id:t.id,label:t.label,children:[]};this.$store.dispatch("activeCatalog",{catalog:e})}}catch(t){console.log("handleNodeClick error: "+t.message)}}.call(this,t),this.registedEvents.includes("handleNodeClick2")&&function(t){try{console.log("handelNodeClick: "+ke()(t)),this.$store.dispatch("update",{key:"catalog",value:t})}catch(t){console.log("handleNodeClick error: "+t.message)}}.call(this,t))}}},$e={render:function(){var t=this.$createElement;return(this._self._c||t)("el-tree",{attrs:{"registed-events":this.registedEvents,data:this.catalog,props:this.defaultProps,"empty-text":this.emptyText,"highlight-current":this.highlightCurrent},on:{"node-click":this.handleNodeClick,"node-contextmenu":this.showCatalogMenu}})},staticRenderFns:[]},xe=a("VU/8")(Me,$e,!1,null,null,null).exports,Re={name:"Toolbar",components:{catalog:xe},computed:{catalog:function(){return this.$store.getters.catalog}},methods:{handleCommand:function(t){var e=this.$store.getters.activeCatalog;"newNote"===t&&this.$store.dispatch("addNote",{catalog:e}),"newCatalog"===t&&this.$store.dispatch("addCatalog",{catalog:e})}}},Ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dropdown",{staticClass:"newOp",attrs:{placement:"bottom",trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"primary"}},[t._v("\n            + 新文档\n        ")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"newNote"}},[t._v("新建笔记")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"newCatalog"}},[t._v("新建文件夹")])],1)],1),t._v(" "),a("catalog",{attrs:{catalog:t.catalog,"registed-events":["showCatalogMenu","handleNodeClick"]}})],1)},staticRenderFns:[]};var Be=a("VU/8")(Re,Ee,!1,function(t){a("VDgF")},null,null).exports,Ke={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}}},[a("el-input",{staticClass:"search_box",attrs:{placeholder:"    搜索..."},model:{value:t.condition,callback:function(e){t.condition=e},expression:"condition"}})],1)},staticRenderFns:[]};var Ae,Se=a("VU/8")({name:"Search",data:function(){return{condition:""}},methods:{search:function(t){this.$store.dispatch("search",{condition:this.condition})}}},Ke,!1,function(t){a("eYGf")},null,null).exports,Te=a("Dd8w"),Je=a.n(Te),Oe=(Ae=null,function(t){var e=this;clearTimeout(Ae);var a=Je()({},this.$store.getters.activeNote);Ae=setTimeout(function(){try{console.log("handleChange: "+t),a.content=t,e.$store.dispatch("updateNote",{note:a});var o=e.$store.getters.activeCatalog,n={id:o.id,label:o.label,children:[]};e.$store.dispatch("activeCatalog",{catalog:n})}catch(t){console.log("handleChange error: "+t.message)}},1e3)}),We={name:"Editor",props:{note:Object},computed:{content:{get:function(){return this.note.content},set:function(t){this.note.content=t}}},methods:{handleChange:function(t){Oe.call(this,t)}}},Fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor_box"},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.note.isNote,expression:"note.isNote"}],attrs:{autofocus:"true",type:"textarea"},on:{input:t.handleChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},staticRenderFns:[]};var Ye=a("VU/8")(We,Fe,!1,function(t){a("rrAn")},null,null).exports,Ze=null;var Ve={name:"CatalogMenu",data:function(){return{plain:!1,visibleArrow:!1}},props:{show:Boolean},computed:{showMenu:function(){var t=this.$store.getters.selectedNode;return!(!t.id||t.id===this.$store.getters.catalog[0].id)},isNote:function(){return this.$store.getters.selectedNode.isNote}},methods:{onBlur:function(t){(function(){var t=this;clearTimeout(Ze),Ze=setTimeout(function(){t.$store.dispatch("show",{key:"showCatalogMenu",value:!1})},500)}).call(this)},onFocus:function(t){clearTimeout(Ze)},showRenameDialog:function(t){this.$store.dispatch("show",{key:"showRenameDialog",value:!0})},showChangeCatalogDialog:function(t){this.$store.dispatch("show",{key:"showChangeCatalogDialog",value:!0})},showDeleteDialog:function(t){this.$store.dispatch("show",{key:"showDeleteDialog",value:!0})},handleCommand:function(t){var e=this.$store.getters.activeCatalog;"newNote"===t&&this.$store.dispatch("addNote",{catalog:e}),"newCatalog"===t&&this.$store.dispatch("addCatalog",{catalog:e})}}},Ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{tabindex:"1"},on:{blur:t.onBlur,focus:t.onFocus}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"box-card",attrs:{"body-style":"padding: 0px;"}},[a("div",{staticClass:"text item"},[a("el-popover",{attrs:{placement:"right-start",trigger:"hover","visible-arrow":t.visibleArrow}},[a("div",[a("div",{staticClass:"text item"},[a("el-button",{on:{click:function(e){t.handleCommand("newNote")}}},[t._v("新建文件")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-button",{on:{click:function(e){t.handleCommand("newCatalog")}}},[t._v("新建文件夹")])],1)]),t._v(" "),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),a("span",[t._v("新文档")]),t._v(" "),a("i",{staticClass:"el-icon-caret-right"})])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"text item",on:{click:t.showRenameDialog}},[a("el-button",{attrs:{plain:t.plain}},[t._v("重命名")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu&&t.isNote,expression:"showMenu && isNote"}],staticClass:"text item",on:{click:t.showChangeCatalogDialog}},[a("el-button",{attrs:{plain:t.plain}},[t._v("移动到")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"text item",on:{click:t.showDeleteDialog}},[a("el-button",{attrs:{plain:t.plain}},[t._v("删除")])],1)])],1)},staticRenderFns:[]};var Ie=a("VU/8")(Ve,Ue,!1,function(t){a("K1Rs")},null,null).exports;function Le(){this.$store.dispatch("show",{key:"showDeleteDialog",value:!1})}var Xe={name:"DeleteDialog",data:function(){return{}},props:{show:Boolean},methods:{closeDeleteDialog:function(){Le.call(this)},deleteAndCloseDeleteDialog:function(){this.$store.dispatch("deleteNode"),Le.call(this)}}},je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"删除",visible:t.show,width:"30%",center:""},on:{close:t.closeDeleteDialog}},[a("span",[t._v("您确定执行删除操作？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDeleteDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteAndCloseDeleteDialog}},[t._v("确 定")])],1)])},staticRenderFns:[]},ze=a("VU/8")(Xe,je,!1,null,null,null).exports;function Ge(){this.$store.dispatch("show",{key:"showRenameDialog",value:!1})}var Pe={name:"RenameDialog",props:{show:Boolean},computed:{newName:{get:function(){return this.$store.getters.selectedNode.label},set:function(t){this.$store.getters.selectedNode.label=t}}},methods:{closeRenameDialog:function(){Ge.call(this)},updateAndCloseRenameDialog:function(){console.log("update",this.$store.getters.selectedNode),this.$store.dispatch("updateNode",{node:this.$store.getters.selectedNode}),Ge.call(this)}}},He={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"重命名",visible:t.show,width:"30%",center:""},on:{close:t.closeRenameDialog}},[a("el-form",[a("el-form-item",{attrs:{label:"重命名为"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeRenameDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateAndCloseRenameDialog}},[t._v("确 定")])],1)],1)},staticRenderFns:[]},Qe=a("VU/8")(Pe,He,!1,null,null,null).exports;function qe(){this.$store.dispatch("show",{key:"showChangeCatalogDialog",value:!1})}var ta={name:"ChangeCatalogDialog",components:{catalog:xe},data:function(){return{emptyPath:"移动到："}},props:{show:Boolean},computed:{catalog:function(){return this.$store.getters.catalog},note:function(){return this.$store.getters.activeNote},path:function(){var t=this.$store.getters.updateCatalog,e=this.emptyPath;return void 0!==t&&(e+=this.$store.getters.catalog[0].label,void 0!==t.path&&(e+=t.path)),e}},methods:{closeChangeCatalogDialog:function(){qe.call(this)},updateAndCloseChangeCatalogDialog:function(){console.log("update",this.$store.getters.selectedNode);var t=this.$store.getters.selectedNode;t.catalog_id=this.$store.getters.updateCatalog.id,this.$store.dispatch("updateNode",{node:t}),qe.call(this)}}},ea={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"移动到",visible:t.show,width:"30%",center:""},on:{close:t.closeChangeCatalogDialog}},[a("el-form",[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{disabled:!0,value:t.path}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("catalog",{attrs:{catalog:t.catalog,"registed-events":["handleNodeClick2"]}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeChangeCatalogDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.path===t.emptyPath},on:{click:t.updateAndCloseChangeCatalogDialog}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var aa={name:"App",components:{toolbar:Be,search:Se,catalog:xe,editor:Ye,"catalog-menu":Ie,"delete-dialog":ze,"rename-dialog":Qe,"change-catalog-dialog":a("VU/8")(ta,ea,!1,null,null,null).exports},computed:{catalog:function(){return this.$store.getters.activeCatalog.children},note:function(){return this.$store.getters.activeNote},showCatalogMenu:function(){return this.$store.getters.showCatalogMenu},showDeleteDialog:function(){return this.$store.getters.showDeleteDialog},showRenameDialog:function(){return this.$store.getters.showRenameDialog},showChangeCatalogDialog:function(){return this.$store.getters.showChangeCatalogDialog}},beforeMount:function(){this.$store.dispatch("initData")},methods:{showContextMenu:function(t){(function(){}).call(this)}}},oa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"},on:{contextmenu:function(e){return e.preventDefault(),t.showContextMenu(e)}}},[a("el-container",[a("el-aside",{staticClass:"toolbar",attrs:{width:"200px"}},[a("toolbar")],1),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("search"),t._v(" "),a("catalog",{attrs:{catalog:t.catalog,"registed-events":["showCatalogMenu","handleNodeClick"]}})],1),t._v(" "),a("el-main",{staticClass:"editor"},[a("editor",{attrs:{note:t.note}})],1)],1)],1),t._v(" "),a("catalog-menu",{staticClass:"diy-dialog",attrs:{id:"catalog-menu",show:t.showCatalogMenu}}),t._v(" "),a("delete-dialog",{staticClass:"diy-dialog",attrs:{id:"delete-dialog",show:t.showDeleteDialog}}),t._v(" "),a("rename-dialog",{staticClass:"diy-dialog",attrs:{id:"rename-dialog",show:t.showRenameDialog}}),t._v(" "),a("change-catalog-dialog",{staticClass:"diy-dialog",attrs:{id:"change-catalog-dialog",show:t.showChangeCatalogDialog}})],1)},staticRenderFns:[]};var na=a("VU/8")(aa,oa,!1,function(t){a("i1cv")},null,null).exports,la=a("/ocq");ye.default.use(la.a);var ia=new la.a({routes:[{path:"/:catalog",name:"Catalog",component:xe,children:[{path:":note",name:"Editor",component:Ye}]}]}),sa=a("NYxO"),ca={catalog:[],catalogKv:{},activeCatalog:{},activeNote:{},selectedNode:{},showCatalogMenu:!1,showDeleteDialog:!1,showRenameDialog:!1,showChangeCatalogDialog:!1,update:{}},ua=a("Gu7T"),ra=a.n(ua),da={resetCatalog:function(t,e){console.log("resetCatalog: "+ke()(e)),e&&e.catalog&&(t.catalog=[].concat(ra()(e.catalog))),e&&e.catalogKv&&(t.catalogKv=Je()({},e.catalogKv))},addNote:function(t,e){console.log("addNote: "+ke()(e)),e&&e.newNote&&t.activeCatalog.children.push(Je()({},e.newNote))},addCatalog:function(t,e){console.log("addCatalog: "+ke()(e)),e&&e.newCatalog&&t.activeCatalog.children.push(Je()({},e.newCatalog))},updateNote:function(t,e){console.log("updateNote: "+ke()(e)),e&&e.note&&(t.activeNote=Je()({},e.note))},activeCatalog:function(t,e){console.log("activeCatalog: "+ke()(e)),e&&e.catalog&&(t.activeCatalog=JSON.parse(ke()(e.catalog)))},activeNote:function(t,e){console.log("activeNote: "+ke()(e)),e&&e.note&&(t.activeNote=Je()({},e.note))},deactivateNote:function(t){t.activeNote={}},show:function(t,e){e&&e.key&&(t[e.key]=e.value,console.log("show:",e.key,e.value))},selectNode:function(t,e){e&&e.node&&(t.selectedNode=e.node)},deleteNode:function(t){t.selectedNode={}},update:function(t,e){e&&e.key&&(ye.default.set(t.update,e.key,e.value),console.log("update:",e.key,e.value))}},ga=1,fa=1,ha=[],va={noteMessager:{add:function(t,e){var a=ga++,o=JSON.parse(t);o.id=a,o.is_delete=!1,ha.push(Je()({},o)),e(a)},update:function(t,e){var a=JSON.parse(t);ha.forEach(function(t){a.id===t.id&&(t.content=a.content,t.label=a.label,a.catalog_id&&(t.catalog_id=a.catalog_id))}),e()},delete:function(t,e){var a=JSON.parse(t);ha.forEach(function(t){a.id===t.id&&(t.is_delete=!0)}),e()},findAllByCatalogId:function(t,e){console.log(ha);var a=[];ha.forEach(function(e){e.catalog_id===t&&!1===e.is_delete&&a.push({id:e.id,title:e.label,content:e.content})}),e(ke()(a))}},catalogMessager:{initCatalog:function(t){t(ke()({catalog:[{id:-1,label:"我的文件夹",children:[]}],catalogKv:{"-1":"0"}}))},updateCatalog:function(t,e){e()},add:function(t,e){e(fa++)},update:function(t,e){e()},delete:function(t,e){e()}},searcherMessager:{add:function(t,e){},update:function(t,e){},delete:function(t,e){},all:function(t,e){var a=[];ha.forEach(function(t){a.push({id:t.id,title:t.label,content:t.content,catalog_id:t.catalog_id,isNote:!0})}),e(ke()(a))}}},pa={get:function(t){return void 0===window.channel?va[t]:window.channel.objects[t]}};function ma(t,e){switch(console.log("change",e),e.type){case"updateSelf":!function t(a){if(console.log("parent",a),a.id===e.catalog.id)return a.label=e.catalog.label,!0;var o=a.children;if(o)for(var n in o)if(t(o[n]))return!1;return!1}(t);break;case"updateParent":break;case"delete":!function t(a){if(console.log("parent",a),a.id===e.catalog.id)return!0;var o=a.children;if(o)for(var n in o)if(t(o[n]))return o.splice(n,1),!1;return!1}(t)}}function Ca(t,e){try{pa.get("catalogMessager").initCatalog(function(a){var o=JSON.parse(a);t.commit("resetCatalog",{catalog:o.catalog,catalogKv:o.catalogKv}),e&&e.activeCatalog&&ba(t,{catalog:o.catalog[0]})})}catch(t){console.log("addCatalog error: "+t.message)}}function wa(t,e){try{if(e&&e.note)pa.get("noteMessager").update(ke()(e.note),function(){t.commit("updateNote",e),ba(t,{catalog:t.state.activeCatalog}),pa.get("searcherMessager").update(ke()(e.note))})}catch(t){console.log("activeCatalog error: "+t.message)}}function Na(t,e){try{if(e&&e.catalog){var a=pa.get("catalogMessager");a.update(ke()(e.catalog),function(){ma(t.state.catalog[0],{type:"updateSelf",catalog:e.catalog});var o={catalog:t.state.catalog,catalogKv:t.state.catalogKv};a.updateCatalog(ke()(o),function(){t.commit("resetCatalog",o),ba(t,{catalog:t.state.activeCatalog})}),pa.get("searcherMessager").update(ke()(e.catalog))})}}catch(t){console.log("activeCatalog error: "+t.message)}}function ba(t,e){try{var a={id:t.state.catalog[0].id,label:t.state.catalog[0].label,children:[]};if(e&&e.catalog&&e.catalog.id){a.id=e.catalog.id,a.label=e.catalog.label;var o=t.state.catalogKv[a.id].split("-"),n=t.state.catalog[0];o.slice(1).forEach(function(t){n=n.children[t]}),n.children&&n.children.forEach(function(t){a.children.push({id:t.id,label:t.label})})}pa.get("noteMessager").findAllByCatalogId(a.id,function(e){JSON.parse(e).forEach(function(t){a.children.push({id:t.id,label:t.title,content:t.content,isNote:!0})}),t.commit("activeCatalog",{catalog:a})})}catch(t){console.log("activeCatalog error: "+t.message)}}function Da(t,e){if(e&&e.note){t.commit("activeNote",e);var a=document.getElementsByTagName("textarea")[0];a&&a.focus()}}function ya(t){t.commit("deactivateNote")}var _a={initData:function(t){Ca(t,{activeCatalog:!0})},resetCatalog:function(t){Ca(t)},addNote:function(t,e){!function(t,e){try{var a={label:"无标题笔记",content:"",isNote:!0};e&&e.catalog&&(a.catalog_id=e.catalog.id),pa.get("noteMessager").add(ke()(a),function(e){a.id=e,t.commit("addNote",{newNote:a}),Da(t,{note:a}),pa.get("searcherMessager").add(ke()(a))})}catch(t){console.log("addNote error: "+t.message)}}(t,e)},addCatalog:function(t,e){!function(t,e){try{var a={label:"新建文件夹"},o="0",n=t.state.catalog[0];if(e&&e.catalog){a.parent_id=e.catalog.id;var l="/";(o=t.state.catalogKv[a.parent_id]).split("-").slice(1).forEach(function(t){n=n.children[t],l+=n.label+"/"}),a.path=l+a.label}var i=pa.get("catalogMessager");i.add(ke()(a),function(e){a.id=e,t.commit("addCatalog",{newCatalog:a}),null==n.children&&(n.children=[]),n.children.push(a);var l={catalog:t.state.catalog,catalogKv:t.state.catalogKv};l.catalogKv[e]=o+"-"+(n.children.length-1),i.updateCatalog(ke()(l),function(){t.commit("resetCatalog",l)}),pa.get("searcherMessager").add(ke()(a))})}catch(t){console.log("addCatalog error: "+t.message)}}(t,e)},updateNote:function(t,e){wa(t,e)},updateCatalog:function(t,e){Na(t,e)},activeCatalog:function(t,e){ba(t,e)},activeNote:function(t,e){Da(t,e)},deactivateNote:function(t){ya(t)},search:function(t,e){!function(t,e){e&&e.condition&&pa.get("searcherMessager").all(e.condition,function(e){var a={id:t.state.catalog[0].id,label:t.state.catalog[0].label,children:JSON.parse(e)};a.children.forEach(function(t){t.label=t.title,delete t.title}),t.commit("activeCatalog",{catalog:a}),ya(t)})}(t,e)},show:function(t,e){e&&e.key&&t.commit("show",e)},selectNode:function(t,e){e&&e.node&&t.commit("selectNode",e)},deleteNode:function(t){var e=t.state.selectedNode;null!=e.id&&(e.isNote?function(t,e){e&&e.node&&pa.get("noteMessager").delete(ke()(e.node),function(){t.commit("deleteNode"),t.state.activeNote.id===e.node.id&&ya(t),ba(t,{catalog:t.state.activeCatalog}),pa.get("searcherMessager").delete(ke()(e.node))})}(t,{node:e}):function(t,e){if(e&&e.node){var a=pa.get("catalogMessager");a.delete(ke()(e.node),function(){t.commit("deleteNode"),ma(t.state.catalog[0],{type:"delete",catalog:e.node});var o={catalog:t.state.catalog,catalogKv:t.state.catalogKv};delete o.catalogKv[e.node.id],a.updateCatalog(ke()(o),function(){t.commit("resetCatalog",o),ba(t,{catalog:t.state.activeCatalog})}),pa.get("searcherMessager").delete(ke()(e.node))})}}(t,{node:e}))},updateNode:function(t,e){if(e&&e.node&&null!=e.node.id){var a=e.node;a.isNote?wa(t,{note:a}):Na(t,{catalog:a})}},update:function(t,e){e&&e.key&&t.commit("update",e)}};ye.default.use(sa.a);var ka=new sa.a.Store({state:ca,mutations:da,actions:_a,getters:{catalog:function(t){return t.catalog},catalogKv:function(t){return t.catalogKv},activeCatalog:function(t){return t.activeCatalog},activeNote:function(t){return t.activeNote},selectedNode:function(t){return t.selectedNode},showCatalogMenu:function(t){return t.showCatalogMenu},showDeleteDialog:function(t){return t.showDeleteDialog},showRenameDialog:function(t){return t.showRenameDialog},showChangeCatalogDialog:function(t){return t.showChangeCatalogDialog},updateCatalog:function(t){return t.update.catalog}}});ye.default.use(De.a),ye.default.use(Ne.a),ye.default.use(Ce.a),ye.default.use(pe.a),ye.default.use(he.a),ye.default.use(ge.a),ye.default.use(re.a),ye.default.use(ce.a),ye.default.use(ie.a),ye.default.use(ne.a),ye.default.use(ae.a),ye.default.use(te.a),ye.default.use(Qt.a),ye.default.use(Pt.a),ye.default.use(zt.a),ye.default.use(Xt.a),ye.default.use(It.a),ye.default.use(Vt.a),ye.default.use(Yt.a),ye.default.use(Wt.a),ye.default.use(Jt.a),ye.default.use(St.a),ye.default.use(Kt.a),ye.default.use(Et.a),ye.default.use(xt.a),ye.default.use(Mt.a),ye.default.use(_t.a),ye.default.use(Dt.a),ye.default.use(Nt.a),ye.default.use(Ct.a),ye.default.use(pt.a),ye.default.use(ht.a),ye.default.use(gt.a),ye.default.use(rt.a),ye.default.use(ct.a),ye.default.use(it.a),ye.default.use(nt.a),ye.default.use(at.a),ye.default.use(tt.a),ye.default.use(Q.a),ye.default.use(P.a),ye.default.use(z.a),ye.default.use(X.a),ye.default.use(I.a),ye.default.use(V.a),ye.default.use(Y.a),ye.default.use(W.a),ye.default.use(J.a),ye.default.use(S.a),ye.default.use(K.a),ye.default.use(E.a),ye.default.use(x.a),ye.default.use(M.a),ye.default.use(_.a),ye.default.use(D.a),ye.default.use(N.a),ye.default.use(C.a),ye.default.use(p.a),ye.default.use(h.a),ye.default.use(g.a),ye.default.use(r.a),ye.default.use(c.a),ye.default.use(i.a),ye.default.use(n.a.directive),ye.default.config.productionTip=!1,new ye.default({el:"#app",router:ia,store:ka,components:{App:na},template:"<App/>"})},NOFV:function(t,e){},Q6SQ:function(t,e){},RWjY:function(t,e){},Rh7U:function(t,e){},TFIm:function(t,e){},"U/ZW":function(t,e){},V5v9:function(t,e){},VDgF:function(t,e){},WzZF:function(t,e){},"X+ky":function(t,e){},XPMo:function(t,e){},Xd7X:function(t,e){},Yq4J:function(t,e){},Z1wW:function(t,e){},Zki6:function(t,e){},ZzA9:function(t,e){},akml:function(t,e){},bRYy:function(t,e){},bwiK:function(t,e){},cDSy:function(t,e){},d7TW:function(t,e){},dmRH:function(t,e){},eYGf:function(t,e){},hXTu:function(t,e){},i1cv:function(t,e){},isE6:function(t,e){},isgN:function(t,e){},jAzQ:function(t,e){},jZDA:function(t,e){},qunJ:function(t,e){},rrAn:function(t,e){},s967:function(t,e){},tJtB:function(t,e){},uKbn:function(t,e){},ukeg:function(t,e){},vBcO:function(t,e){},vonM:function(t,e){},w2s5:function(t,e){},wJKS:function(t,e){},wlbC:function(t,e){},ylrw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3e42ef21683678e2797b.js.map